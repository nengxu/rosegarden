<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Linux)">
	<META NAME="CREATED" CONTENT="20040613;311800">
	<META NAME="CHANGED" CONTENT="20040808;15075600">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>Managing Instruments (under construction)</H1>
<P>You want to play a particular track using a hammered dulcimer, or
else you've got an audio track that needs some EQ. In either case,
you need an introduction to the <B>instrument</B>. Instruments are
configured with the <B>Instrument Parameters</B> box, and any number
of tracks can be assigned to play via the same instrument. 
</P>
<H2>Instruments</H2>
<P>The previous chapter introduced you to the device, which is a
construct Rosegarden uses to encapsulate information about what lies
on the other side of a play or record connection, and make the
capabilities of that equipment available to you.  Hand in hand with
the device is the <B>instrument</B><SPAN STYLE="font-weight: medium">.</SPAN></P>
<P>Every device has 16 instruments numbered #1 through #16. When
working with MIDI playback devices, each of these instruments
encapsulates a MIDI output channel (the same channel as the number of
the instrument by default, although this relationship is not fixed),
a bank/program/variation assignment, and any initial controllers you
wish to affect the associated channel. These instruments allow you to
assemble up to 16 collections of programs/controllers per device and
assign these combinations to any number of tracks.  If your JACK
server is running, you should have both an &quot;Audio&quot; device
and a &quot;Synth plugin&quot; device in addition to however few or
many MIDI devices you have available.  Each and every one of these
has 16 instruments.</P>
<P>When working with audio and synth plugins, these instruments serve
the same purpose as MIDI channels, allowing you to configure up to 16
different combinations of LADSPA plugins, volume and pan settings,
programs (for synth plugins) and so forth, and then apply these
combinations to any number of different tracks.</P>
<P>I'll try to illustrate the point with some diagrams depicting the
three general types of instruments.  Here we have a sample MIDI
instrument that will play using a hammered dulcimer program. All
tracks assigned to play via this instrument will play using the first
output port on the Sound Blaster Live!, using program 16 from bank 0
0, with an initial volume of 100, and an initial reverb level of 97. 
This instrument will show up as &quot;Sound Blaster Live! (1) #12
(Hammered Dulcimer)&quot; on the menu.</P>
<P><I>NOTE:  While the instrument number and channel do coincide by
default, it's possible to change this relationship.  I have done so
in this example.  Instrument #12 plays using channel 6.</I></P>
<P><IMG SRC="../pixmaps/instrument-diagram.jpg" NAME="Graphic10" ALIGN=BOTTOM WIDTH=223 HEIGHT=255 BORDER=0></P>
<P ALIGN=LEFT>This is a typical synth plugin instrument. The sound it
makes will depend on the synth plugin used, but all tracks assigned
to play via this instrument will make the same sound. Its output will
be piped through the EQ and Reverb plugins, and this instrument will
show up as &quot;Synth plugin #12&quot; on the menu.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/plugin-instrument-diagram.jpg" NAME="Graphic11" ALIGN=BOTTOM WIDTH=372 HEIGHT=205 BORDER=0></P>
<P ALIGN=LEFT>This is a typical audio instrument. Any audio tracks
assigned to play via this instrument will have their output piped
through the EQ and Reverb plugins, and this instrument will show up
as &quot;Audio #12&quot; on the menu.</P>
<P ALIGN=RIGHT><IMG SRC="../pixmaps/jack-instrument-diagram.jpg" NAME="Graphic12" ALIGN=BOTTOM WIDTH=264 HEIGHT=175 BORDER=0></P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT>Notice that all of the above examples were &quot;instrument
#12,&quot; and yet all three of them will produce quite different
results, because each of them is the &quot;instrument #12&quot; of a
completely different device.</P>
<H2>Routing a Track to a Device and Instrument</H2>
<P>The first step in the assignment process is to route a track to a
particular device. The device you use will determine whether you can
play audio or MIDI data on this track. In order to make this device
assignment, begin by clicking the mouse cursor in this area, and
holding a moment until a context menu appears.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/click-and-hold.png" NAME="Graphic3" ALIGN=BOTTOM WIDTH=231 HEIGHT=51 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
You should be presented with a series of two menus that allow you to
choose first the device and then the instrument for this track.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
In this case, I chose to route it to my &quot;Roland SC-33&quot;
device, which is ultimately connected through my Rosegarden studio to
play through ALSA port 64:0, and thus the Roland Sound Canvas I have
plugged into the box physically attached to my computer.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Then I assigned it to that device's instrument #6. Prior to taking
this snapshot, I had already configured this instrument to play using
the &quot;Piano 1&quot; program with the <B>Instrument Parameters </B>box
(more on that in a bit), and so that name appeared in parenthesis in
the second menu.  If an instrument hasn't already been directed to
make use of a particular program, only the instrument number will
appear on this menu, as is the case for most of the other instruments
depicted.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/select-midi.png" NAME="Graphic4" ALIGN=BOTTOM WIDTH=253 HEIGHT=215 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Notice also that instrument #10 has (D) in parenthesis, indicating
that this instrument is normally used for playing drums. (Whether it
actually plays drums depends on the capabilities of the MIDI
equipment or software synth represented by this &quot;device,&quot;
and probably depends on this instrument continuing to remain at the
default channel assignment of 10.) In this example, I arranged
beforehand for this instrument to play using the &quot;Power&quot;
drum kit.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
The remaining &quot;instruments&quot; are not assigned to anything in
particular yet, and on most General MIDI-compliant equipment (or
software synths) these &quot;instruments&quot; will probably play
using a factory default piano program, with volume and other
controllers set to neutral default values.  Some equipment may not
actually produce any noise until you explicitly assign a program to
any instruments you use.</P>
<H2>MIDI Instrument Parameters</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Now that
the track has had its output routed to a MIDI output device and
instrument, and is therefore a MIDI track, the <B>Instrument
Parameters</B> box will display controls similar to these.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-midi-ins.png" NAME="Graphic2" ALIGN=BOTTOM WIDTH=260 HEIGHT=235 BORDER=0></P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">They
allow you to reassign the channel for this &quot;instrument,&quot;
and to dial in a program. In this case, you can see Roland's
variation system in action. The program is set to &quot;20. Churg
Org. 1&quot; and the variation to &quot;17. Church Org. 3&quot; so
this &quot;instrument,&quot; and any tracks routed through it, will
play using a pipe organ sound that isn't part of the basic set of
General MIDI programs.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">You may
change the default controller values by adjusting the knobs.  The
tooltip explains how to use them just as well as I could.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-knobs.png" NAME="Graphic14" ALIGN=BOTTOM WIDTH=304 HEIGHT=100 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<I>NOTE:  If your knobs do not have a crisp, clear appearance like
the ones above, you might need to increase your KDE color contrast to
a higher setting.  Low contrast produces rather fuzzy, indistinct
knobs.  Adjust this with KDE's Control Panel (kcontrol), under
<B>Appearance  &amp; Themes -&gt; Colors</B><SPAN STYLE="font-weight: medium">.
 Non-KDE users may be stuck with whatever they get.</SPAN></I></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
<IMG SRC="../pixmaps/kde-adjust-contrast.png" NAME="Graphic15" ALIGN=BOTTOM WIDTH=304 HEIGHT=374 BORDER=0></P>
<H3>Setting Initial Track Volume and Other Parameters</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">These
initial controllers here inside the instrument provide the mechanism
whereby you configure initial volume, pan, and similar settings for
the track.  Any tracks that are routed to play through this
instrument will share this instrument's parameters.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">The
controllers displayed here for you to adjust will be those which were
defined for the device while configuring the studio, or those you got
for free from the original default studio.  The particular values you
set here will be bound up with this particular instrument on this
particular channel.  They are initial values only, and any of these
controllers may be adjusted in the middle of a composition by
inserting controller events, as we shall see in the next chapter.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><I>NOTE: 
If you notice that your initial controllers are not taking effect, as
can sometimes be the case when you have changed a controller value in
the middle of a composition, and have rewound it to the beginning,
you may need to check <B>Settings -&gt; Configure Rosegarden -&gt;
Sequencer -&gt; Send all MIDI Controllers at start of  playback [x]</B></I></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/document-transmit-controllers.png" NAME="Graphic13" ALIGN=BOTTOM WIDTH=304 HEIGHT=65 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<I><SPAN STYLE="font-weight: medium">NOTE:  The controllers here in
this box are initial values only.</SPAN>  If you have the playback
pointer aimed somewhere in the middle of the document, and then
adjust one of these knobs, do not expect the controller adjustment to
take place at the location of the playback pointer.  If you wish to
make such adjustments, you should use one of the control rulers from
one of the edit views, as I will discuss in the next chapter.</I></P>
<H3>Selecting a GS Drum Kit</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">If you
want to select a GS-style drum kit, your <B>Instrument Parameters</B>
box should look something like this.  The GS drum kits are in the
same bank 0 0 as the Capital Tones/General MIDI programs.  The
checkbox allows you to toggle which set of  programs you see, so you
can use the Program combo box to more effectively change drum kits.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-midi.png" NAME="Graphic6" ALIGN=BOTTOM WIDTH=213 HEIGHT=191 BORDER=0></P>
<H2>Synth Plugin Instrument Parameters</H2>
<P>As mentioned in the introduction, Rosegarden is the first
sequencer for Linux to employ the new DSSI plugin architecture.  If
you have your JACK server running, you should have a &quot;Synth
plugin&quot; device available.</P>
<P><BR><BR>
</P>
<H2>Audio Instrument Parameters</H2>
<P>If you want to use a track for audio, you'll need to make it a
JACK track by routing it to the &quot;Audio&quot; device. (If you do
not have an &quot;Audio&quot; device available, please ensure that
your JACK server is running.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/select-jack.png" NAME="Graphic5" ALIGN=BOTTOM WIDTH=252 HEIGHT=284 BORDER=0></P>
<H2>JACK Instrument Parameters</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">JACK
&quot;instruments&quot; have different controls available in the
<B>Instrument Parameters</B> box.. They allow you to control the
routing of the audio [In: Out: I have no clue what these are actually
good for. This is what I mean by &quot;routing of the audio.&quot;],
and to add layers of plugins. There are redundant Mute, Solo and
Record toggles, as well as volume sliders for left and right</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">stereo
channels, and a mono/stereo toggle. (<IMG SRC="../pixmaps/audio-mono.png" NAME="Graphic8" ALIGN=BOTTOM WIDTH=24 HEIGHT=24 BORDER=0>
<IMG SRC="../pixmaps/audio-stereo.png" NAME="Graphic9" ALIGN=BOTTOM WIDTH=24 HEIGHT=25 BORDER=0>).</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-audio.png" NAME="Graphic7" ALIGN=BOTTOM WIDTH=258 HEIGHT=282 BORDER=0></P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">If you
wish to assign LADSPA plugins to the track, you may use one of the
&quot;&lt;no plugin&gt;&quot; buttons to summon a dialog similar to
this one. You can narrow in on what you want using the <B>Category:</B>
selector, and then dial in a particular plugin with the <B>Plugin:</B>
selector. As you dial through these, the knobs in the bottom half of
this dialog box will change to reflect the controls that are
available for this particular plugin; ranging from one knob to a
screen full of them. You can layer up to five plugins for each
instrument in the &quot;JACK Audio&quot; device, hardware allowing.
Some plugins are particularly expensive in their use of your system's
resources, so using too many may cause performance problems.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/JACK-plugins.png" NAME="Graphic1" ALIGN=BOTTOM WIDTH=360 HEIGHT=278 BORDER=0></P>
<H2>What Do Those Black Boxes Mean?</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">The
column of small boxes to the left of the channel provide a concise
way of showing information about the status of these connections. In
the examples above, you might have noticed that they were in several
different states.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal">
These boxes convey the following information:</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><IMG SRC="../pixmaps/using-rosegarden_html_72a37f4e.png" NAME="Graphic38" ALIGN=BOTTOM WIDTH=14 HEIGHT=15 BORDER=0>
This instrument or device isn't very useful to you right now. It is
is <B>not in use</B> by a track, and it is <B>not connected</B> to
any active output path. 
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><IMG SRC="../pixmaps/using-rosegarden_html_3dc467bd.png" NAME="Graphic79" ALIGN=BOTTOM WIDTH=15 HEIGHT=12 BORDER=0>
This instrument or device could provide a valid output path, and all
you need to do from here is attach it to a track and begin making use
of it. It <B>is connected</B> to an active output path, but it is <B>not
being used</B> by any track. 
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><IMG SRC="../pixmaps/using-rosegarden_html_1e7e4e7a.png" NAME="Graphic81" ALIGN=BOTTOM WIDTH=14 HEIGHT=15 BORDER=0>
A track or tracks are connected to this &quot;device,&quot; but this
is not currently a valid output path, and the events on any tracks
that are routed through this device don't have anywhere to go. This
instrument or device is <B>in use</B> by a track, but is <B>not
connected</B> to an active output path.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><IMG SRC="../pixmaps/using-rosegarden_html_e634bf.png" NAME="Graphic80" ALIGN=BOTTOM WIDTH=14 HEIGHT=16 BORDER=0>
This instrument or device provides a valid output path, and that path
is in use by at least one track. It <B>has a valid connection</B> to
an output path, and that connection is <B>in use</B> by a track.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
In addition, the instrument in use by the current track will have an
extra black outline around either a black filled or black outlined
box, depending on whether or not the path is connected to a valid
output:</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_500c240c.png" NAME="Graphic82" ALIGN=BOTTOM WIDTH=18 HEIGHT=18 BORDER=0>
The active track is connected to an output that is <B>also connected</B>.
If you play this track, you can expect the device you've hooked up to
make some noise.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_5204c333.png" NAME="Graphic83" ALIGN=BOTTOM WIDTH=18 HEIGHT=18 BORDER=0>
The active track is connected to an output that is <B>not connected</B>.
This track, on the other hand, won't make any noise until you assign
a different device to it or enable the device that isn't currently
working.</P>
<H1>Recording Basics</H1>
<P STYLE="margin-bottom: 0.2in">There are three different ways to
record with Rosegarden. If you come from a MIDI background, the most
obvious thing to do is plug in your MIDI keyboard and hit the record
button to record a MIDI segment in the currently-selected track. If
audio is your aim, you'll want to set your mixer recording source and
get to work. On the other hand, if you have all the keyboard skill of
a paraplegic chipmunk, like I do, you might be more interested in
step recording.</P>
<P STYLE="margin-bottom: 0.2in">I will cover step recording later on.
For now my focus is on recording operations that can be performed
from the main window.</P>
<H2>Recording MIDI</H2>
<H2>Recording Audio</H2>
<P><BR><BR>
</P>
<P>boneyard:</P>
<P><BR><BR>
</P>
<P STYLE="border: none; padding: 0in">If you route the track to a
MIDI device, (including the &quot;Synth plugin&quot; device, if
available), then the track will become a MIDI track, and it can only
be used to play MIDI segments. If you drag an audio segment onto this
track by mistake, the audio will not play. Conversely, if you route a
track to the &quot;JACK Audio&quot; device, it will become an audio
track, and it will not play any MIDI segments you happen to drag here
by mistake. 
</P>
</BODY>
</HTML>